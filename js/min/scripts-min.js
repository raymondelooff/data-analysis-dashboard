function linearRegression(a,t){for(var e={},r=a.length,i=0,n=0,s=0,o=0,d=0,l=0;l<a.length;l++)i+=t[l],n+=a[l],s+=t[l]*a[l],o+=t[l]*t[l],d+=a[l]*a[l];return e.slope=(r*s-i*n)/(r*o-i*i),e.intercept=(n-e.slope*i)/r,e.r2=Math.pow((r*s-i*n)/Math.sqrt((r*o-i*i)*(r*d-n*n)),2),e}function animate(a){if(null!=lastView){var t=lastView,e=t.find(".animated"),r=e.attr("data-animations");e.hide().removeClass(r)}if(a.find(".slide").length>0)var i=a.find(".slide.active .animated");else var i=a.find(".animated");$.each(i,function(){var a=$(this).attr("data-animations");$(this).show().addClass(a)})}function trendanalysis(a,t,e){$.get(t.data.url,function(t){var r=t.x,i=t[e.moving_average_key];if(void 0!=e.moving_average_key){var n=["3-staps voortschrijdend gemiddelde"];$.each(r,function(a,t){var e=null,r=null,s=null;a>1&&(e=i[a-2],r=i[a-1],s=d3.round((e+r+i[a])/3,1)),n.push(s)}),charts_array[a].load({columns:[n]})}if(1==e.linear_regression){var s=linearRegression(i,r),o=["Linear"];$.each(r,function(a,t){var e=t*s.slope+s.intercept;o.push(e)}),charts_array[a].load({columns:[o]})}})}var SECTION_SCROLL_SPEED=700,lastView=null,charts_data_array={},charts_array={};$(document).ready(function(){$("#wrapper").fullpage({scrollingSpeed:SECTION_SCROLL_SPEED,scrollOverflow:!0,navigation:!0,onLeave:function(a,t,e){lastView=$(this)},onSlideLeave:function(a,t,e,r){lastView=$(this)},afterLoad:function(a,t){animate($(this))},afterSlideLoad:function(a,t,e,r){animate($(this))}}),$.each(initializeCharts,function(a,t){for(var e=0;e<t.length;e++){var r=t[e],i=a+"-c"+(e+1),n={bindto:"#chart-"+i,data:{url:"/data/chart-"+i+".json",mimeType:"json"},axis:{x:{type:"category"}},grid:{y:{lines:[{value:0}]}}};$.extend(n.data,r.data),$.extend(n.axis,r.axis),$.extend(n,r.other);var s=$(n.bindto).attr("data-chart-height");void 0!=s&&(void 0==n.size&&(n.size={}),n.size.height=parseInt(s)),charts_array[i]=c3.generate(n),charts_data_array[i]=n,(void 0!=r.moving_average_key||1==r.linear_regression)&&trendanalysis(i,n,r)}}),$(".chart-toggle").on("change",function(){var a=$(this).prop("checked"),t=$(this).attr("data-chart-id"),e=charts_data_array[t],r=charts_array[t];a?(r.transform("bar"),r.groups(e.data.groups)):(r.transform("line"),r.groups([]))}),$.each($(".chart-container"),function(){$(this).height($(this).actual("height"))})});